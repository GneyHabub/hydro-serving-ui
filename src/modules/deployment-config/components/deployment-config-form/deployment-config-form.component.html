<form [formGroup]="form" class="dc__form">
  <div class="dc__control">
    <label for="name">Name</label>
    <input formControlName="name" type="text" id="name" />
  </div>

  <div class="dc__group">
    <div formGroupName="hpa" *ngIf="hpa; else addHpaButton">
      <div class="dc__group-title">
        hpa
        <hydro-icon type="close" (click)="removeHpa()"></hydro-icon>
      </div>
      <div class="dc__control">
        <label for="name">maxReplicas</label>
        <input formControlName="maxReplicas" type="text" id="maxReplicas" />
      </div>

      <div class="dc__control">
        <label for="name">minReplicas</label>
        <input formControlName="minReplicas" type="text" id="minReplicas" />
      </div>

      <div class="dc__control">
        <label for="name">cpuUtilization</label>
        <input
          formControlName="cpuUtilization"
          type="text"
          id="cpuUtilization"
        />
      </div>
    </div>
  </div>

  <div class="dc__group">
    <div
      formGroupName="deployment"
      *ngIf="deployment; else addDeploymentButton"
    >
      <div class="dc__group-title">
        Deployment
        <hydro-icon type="close" (click)="removeDeployment()"></hydro-icon>
      </div>
      <div class="dc__control">
        <label for="replicaCount">replicaCount</label>
        <input formControlName="replicaCount" type="text" id="replicaCount" />
      </div>
    </div>
  </div>

  <div class="dc__group">
    <div formGroupName="container" *ngIf="container; else addContainerButton">
      <div class="dc__group-title">
        Container
        <hydro-icon type="close" (click)="removeContainer()"></hydro-icon>
      </div>
      <div formGroupName="resources" class="dc__group">
        <div class="dc__group-title">resources</div>
        <div formGroupName="limits" class="dc__group">
          <div class="dc__group-title">Limits</div>
          <div class="dc__control">
            <label for="limitsCpu">CPU</label>
            <input formControlName="cpu" type="text" id="limitsCpu" />
          </div>

          <div class="dc__control">
            <label for="limitsMemory">Memory</label>
            <input formControlName="memory" type="text" id="limitsMemory" />
          </div>
        </div>
        <div formGroupName="requests" class="dc__group">
          <div class="dc__group-title">Requests</div>
          <div class="dc__control">
            <label for="requestsCpu">CPU</label>
            <input formControlName="cpu" type="text" id="requestsCpu" />
          </div>

          <div class="dc__control">
            <label for="requestsMemory">Memory</label>
            <input formControlName="memory" type="text" id="requestsMemory" />
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="dc__group">
    <div *ngIf="pod; else addPodButton">
      <div class="dc__group-title">
        Pod
        <hydro-icon type="close" (click)="removePod()"></hydro-icon>
      </div>

      <hs-pod [group]="form.get('pod')"></hs-pod>
    </div>
  </div>
</form>

<ng-template #addHpaButton>
  <div>
    <button hs-button kind="stroked" (click)="addHpa()">add hpa</button>
  </div>
</ng-template>

<ng-template #addDeploymentButton>
  <div>
    <button hs-button kind="stroked" (click)="addDeployment()">
      add deployment
    </button>
  </div>
</ng-template>

<ng-template #addContainerButton>
  <div>
    <button hs-button kind="stroked" (click)="addContainer()">
      add container
    </button>
  </div>
</ng-template>

<ng-template #addPodButton>
  <div>
    <button hs-button kind="stroked" (click)="addPod()">add pod</button>
  </div>
</ng-template>
