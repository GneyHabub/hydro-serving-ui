<h2 class="mdl-dialog__title">Release model "{{model.source}}"</h2>
<div class="model-details-table">
    <hydro-list-info [data]="model"></hydro-list-info>

    <label class="hydro-checkbox">
      Contract
      <input type="checkbox" [checked]="isContractViewEnabled" (change)="showContract($event)">
      <span></span>
    </label>

    <form [formGroup]="contractsForm" *ngIf="isContractViewEnabled">
        <div formArrayName="signatures">
            <div *ngFor="let signature of contractsForm['controls'].signatures['controls']; let i = index;" [formGroupName]="i" class="contracts-list__item">
                <hydro-input-text formControlName="signatureName" label="Signature name"></hydro-input-text>
                
                <div class="hydro-panel" formArrayName="inputs">
                    <h5 class="hydro-panel__header">Inputs</h5>
                    <div *ngFor="let input of signature['controls'].inputs['controls']; let i = index;" [formGroupName]="i" class="field-list__item">
                        <hydro-input-text formControlName="fieldName" label="Field name"></hydro-input-text>
                        <hydro-input-text formControlName="dataType" label="Data type"></hydro-input-text>
                        <hydro-input-text formControlName="shape" label="Shape"></hydro-input-text>
                    </div>
                </div>
                
                <div class="hydro-panel" formArrayName="outputs">
                    <h5 class="hydro-panel__header">Outputs</h5>
                    <div *ngFor="let output of signature['controls'].outputs['controls']; let i = index;" [formGroupName]="i" class="field-list__item">
                        <hydro-input-text formControlName="fieldName" label="Field name"></hydro-input-text>
                        <hydro-input-text formControlName="dataType" label="Data type"></hydro-input-text>
                        <hydro-input-text formControlName="shape" label="Shape"></hydro-input-text>
                    </div>
                </div>
                
                <svg class="contracts-actions__delete" (click)="removeSignatureFromContract(i)" *ngIf="contractsForm['controls'].signatures['controls'].length > 1">
                    <use xlink:href="#icon-remove"></use>
                </svg>
            </div>

            <button type="button" class="btn btn-flat" (click)="addSignatureToContract()">
                <svg><use xlink:href="#icon-plus"></use></svg>
                <span>Add Signature</span>
            </button>
        </div>
    </form>
</div>
<div class="btn-group form-actions">
    <button class="btn btn-flat btn-large" (click)="dialogRef.hide()" type="button">CANCEL</button>
    <button class="btn btn-colored btn-large" type="submit" (click)="onSubmit()">{{submitBtnText}}</button>
</div>
