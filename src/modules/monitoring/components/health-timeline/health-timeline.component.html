<div class="reqstore_chart" #wrapper>
  <ng-container *ngIf="displayedTime$ | async; else noDataAvailable">
    <div class="reqstore_chart__header">
      <div *ngIf="live; else timeBadge">
        <div
          class="live-badge"
        >
        live
        </div>
      </div>

      <!-- <div
        class="button button--white zoom-out"
        *ngIf="showZoomOut()"
        (click)="zoomOut()"
      >
        Zoom out
      </div> -->
    </div>
    <svg [attr.width]="canvasWidth" [attr.height]="canvasHeight" #svgContainer>
      <g style="transform:translate(100px, 0)">
        <defs>
          <clipPath id="datasetClipPath">
            <rect x="0" y="0" [attr.width]="mainMapWidth" height="64"></rect>
          </clipPath>
        </defs>
        <g style="transform:translate(-100px, 0)">
          <text
            class="y-title"
            *ngFor="let item of labels; let i = index"
            [attr.y]="12"
            [attr.transform]="getYLabelTranslate(i)"
          >
            {{ item }}
          </text>
        </g>
        <g #brush style="transform:translate(0, 0)"></g>
        <g #dataContainer></g>
        <g hsD3Axis [transform]="xAxisTransform" [scale]="scale"></g>
      </g>
    </svg>
    <hs-health-timeline-minimap
      [width]="mainMapWidth"
      [fullLog]="fullLog"
      [currentTimeInterval]="brushEnd$ | async"
      (brushEnd)="onMinimapBrushEnd($event)"
      (brushMove)="onMinimapBrushMove($event)"
    >
    </hs-health-timeline-minimap>
  </ng-container>
</div>
<ng-template #timeBadge>
  <div class="selected-time" (click)="zoomOut()">
    {{ (displayedTime$ | async)?.from | utcToLocal }} -
    {{ (displayedTime$ | async)?.to | utcToLocal }}
    <hydro-icon class="button__icon" type="icon-close"></hydro-icon> 
  </div>
</ng-template>

<ng-template #noDataAvailable>
  <div class="noDataAvailable">
    No data available
  </div>
</ng-template>
