<div class="monitoring">
  <ng-container *ngIf="!(error$ | async); else errorSection">
    <section class="monitoring__aggregation">
      <hs-aggregation
        [aggregation]="checksAggregation$ | async"
        [canLoadLeft]="canLoadLeft$ | async"
        [canLoadRight]="canLoadRight$ | async"
        (changedSelectedColumn)="onSelectedAggregationColumn($event)"
        (loadedOlder)="loadOlder()"
        (loadedNewest)="loadNewest()"
      >
      </hs-aggregation>
    </section>

    <hs-requests-information
      [aggregation]="selectedAggregationColumn$ | async"
      [latency]="latency$ | async"
      [errors]="errorsChecks$ | async"
    >
    </hs-requests-information>
    <hs-batch-metrics
      [aggregation]="selectedAggregationColumn$ | async"
    ></hs-batch-metrics>
    <hs-log
      [checks]="checks$ | async"
      [modelVersion]="modelVersion$ | async"
    ></hs-log>
    <hs-custom-checks
      [customMetrics]="customMetrics$ | async"
      [customChecks]="customChecks$ | async"
      (openSettings)="openSettings()"
    ></hs-custom-checks>
  </ng-container>
</div>

<ng-template #errorSection>
  <hs-error-message class="monitoring-page__error">
    {{ error$ | async }}
  </hs-error-message>
</ng-template>
